{% extends 'base.html.twig' %}

{% block title %}Détails de l'utilisateur
{% endblock %}

{% block body %}
	<div
		class="container mt-5">
		<!-- Titre de la page -->
		<h2 class="text-center mb-4">
			<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-person-check-fill" viewbox="0 0 16 16">
				<path fill-rule="evenodd" d="M15.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L12.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
				<path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
			</svg>
			&nbsp;&nbsp;{{ user.firstname|capitalize }}
			{{ user.lastname|capitalize }}
		</h2>

		<!-- Carte des détails utilisateur -->
		<div class="row justify-content-center">
			<div class="col-md-8 col-lg-6">
				<div class="card shadow-sm">
					<div class="card-body">
						<dl
							class="row">
							<!-- Profession -->
							<dt class="col-sm-4">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-mortarboard-fill" viewbox="0 0 16 16">
									<path d="M8.211 2.047a.5.5 0 0 0-.422 0l-7.5 3.5a.5.5 0 0 0 .025.917l7.5 3a.5.5 0 0 0 .372 0L14 7.14V13a1 1 0 0 0-1 1v2h3v-2a1 1 0 0 0-1-1V6.739l.686-.275a.5.5 0 0 0 .025-.917z"/>
									<path d="M4.176 9.032a.5.5 0 0 0-.656.327l-.5 1.7a.5.5 0 0 0 .294.605l4.5 1.8a.5.5 0 0 0 .372 0l4.5-1.8a.5.5 0 0 0 .294-.605l-.5-1.7a.5.5 0 0 0-.656-.327L8 10.466z"/>
								</svg>
								&nbsp;Profession
							</dt>
							<dd class="col-sm-8">{{ user.profession }}</dd>

							<!-- Adresse -->
							<dt class="col-sm-4">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-house-fill" viewbox="0 0 16 16">
									<path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
									<path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/>
								</svg>
								&nbsp;Adresse
							</dt>
							<dd class="col-sm-8">{{ user.adressePostale }}</dd>

							<!-- Téléphone -->
							<dt class="col-sm-4">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-telephone-fill" viewbox="0 0 16 16">
									<path fill-rule="evenodd" d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z"/>
								</svg>
								&nbsp;Téléphone
							</dt>
							<dd class="col-sm-8">{{ user.numTelephone }}</dd>

							<!-- Email -->
							<dt class="col-sm-4">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-envelope-at-fill" viewbox="0 0 16 16">
									<path d="M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2zm-2 9.8V4.698l5.803 3.546zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.5 4.5 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586zM16 9.671V4.697l-5.803 3.546.338.208A4.5 4.5 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671"/>
									<path d="M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791"/>
								</svg>
								&nbsp;Email
							</dt>
							<dd class="col-sm-8">{{ user.email }}</dd>

							<!-- Rôles -->
							<dt class="col-sm-4">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-fill" viewbox="0 0 16 16">
									<path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
								</svg>
								&nbsp;Rôle
							</dt>
							<dd class="col-sm-8">
								{% for role in user.roles %}
									{% if role == 'ROLE_USER' %}
										Utilisateur
									{% elseif role == 'ROLE_ADMIN' %}
										Administrateur
									{% endif %}
								{% endfor %}
							</dd>
						</dl>

						<!-- Boutons d'action -->
						<div class="d-flex justify-content-center mt-4 mx-2">
							<a href="{{ path('app_utilisateurs') }}" class="btn btn-outline-dark">Retour</a>&nbsp;&nbsp;
							<a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-outline-primary">Modifier</a>&nbsp;&nbsp;
							<form method="post" action="{{ path('app_user_delete', {'id': user.id}) }}" class="delete-form" data-user="{{ user.firstname }} {{ user.lastname }}">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
								<button type="submit" class="btn btn-outline-danger">Supprimer</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
		document.addEventListener('DOMContentLoaded', function () {
document.querySelectorAll('.delete-form').forEach(function (form) {
form.addEventListener('submit', function (event) {
event.preventDefault();
const user = form.getAttribute('data-user');

Swal.fire({
title: 'Êtes-vous sûr?',
text: `Vous êtes sur le point de supprimer ${user}. Cette action est irréversible!`,
icon: 'warning',
showCancelButton: true,
confirmButtonColor: '#3085d6',
cancelButtonColor: '#d33',
confirmButtonText: 'Oui, supprimer!',
cancelButtonText: 'Annuler'
}).then((result) => {
if (result.isConfirmed) {
form.submit();
}
});
});
});
});
	</script>
{% endblock %}
